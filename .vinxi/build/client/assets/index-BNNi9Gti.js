import{a as ie,r as A,V as k,j as e,o as L,b as K,n as g,s as q,c as W,l as ae}from"./index-BzBvWqhX.js";import{u as T,a as de,b as ce,c as ue,C as me,d as xe,U as pe}from"./zod-_sgmqnks.js";import{u as fe}from"./useMutation-Cv5Pj69L.js";import{C as he}from"./check-Dt4IKMKD.js";const ge=L({guestName:q().min(1,"Name is required"),guestEmail:q().email().optional().or(ae("")),guestPhone:q().optional(),guestLocation:q().optional(),adults:g().min(1,"At least 1 adult required"),children:g().min(0),infants:g().min(0),elder:g().min(0),memberId:g().min(1,"Please select a member"),eventId:g().min(1,"Please select an event"),sessionSelections:K(L({sessionId:g(),selected:W(),optOutOfFood:W().default(!1),productSelections:K(L({productId:g(),productTypeId:g(),quantity:g().min(0)}))}))}),Ee=function(){const E=ie(),[I,Q]=A.useState(null),X=T(E.getPublicEvents.queryOptions()),Z=T(E.getPublicMembers.queryOptions()),m=T({...E.getPublicSessions.queryOptions({eventId:I}),enabled:!!I}),y=T(E.getPublicProducts.queryOptions()),G=fe(E.guestRegistration.mutationOptions({onSuccess:s=>{k.success(`Registration successful! Transaction ID: ${s.transactionId}`),ee(),Q(null)},onError:s=>{k.error(s.message||"Registration failed")}})),{register:c,handleSubmit:_,formState:{errors:f},reset:ee,watch:S,setValue:D,control:se}=de({resolver:ce(ge),defaultValues:{adults:1,children:0,infants:0,elder:0,sessionSelections:[]}}),{fields:j,replace:B}=ue({control:se,name:"sessionSelections"}),p=S("sessionSelections"),$=S("eventId"),N=S("adults"),w=S("children"),te=S("infants"),v=S("elder"),re=(N||0)+(w||0)+(te||0)+(v||0),U=(s,r,n,a)=>{switch(s){case"Adult":return r||0;case"Children":return n||0;case"Elder":return a||0;default:return 0}};A.useEffect(()=>{$&&$!==I&&Q($)},[$,I]),A.useEffect(()=>{if(m.data&&m.data.length>0&&y.data){console.log("Guest registration: Initializing session selections...");const s=m.data.map(r=>{const n=[];return r.productSessionMaps.forEach(a=>{a.product.productTypes.forEach(t=>{n.push({productId:a.product.id,productTypeId:t.id,quantity:0})})}),console.log(`Guest registration: Session ${r.id} initialized with ${n.length} product selections`),{sessionId:r.id,selected:!1,optOutOfFood:!1,productSelections:n}});B(s),console.log("Guest registration: Session selections initialized:",s)}},[m.data,y.data,N,w,v,B]),A.useEffect(()=>{j.length>0&&y.data&&m.data&&(console.log("Guest registration: Updating entry quantities based on guest counts..."),j.forEach((s,r)=>{const n=s.sessionId,a=m.data?.find(t=>t.id===n);a&&a.productSessionMaps.forEach(t=>{t.product.productTypes.forEach(u=>{if(t.product.productType==="Entry"){const o=U(u.productSize,N||1,w||0,v||0),l=j[r]?.productSelections?.findIndex(d=>d.productId===t.product.id&&d.productTypeId===u.id);l!==void 0&&l>=0&&D(`sessionSelections.${r}.productSelections.${l}.quantity`,o)}})})}))},[N,w,v,j.length,y.data,m.data,D,U]);const ne=()=>{if(!m.data||!y.data)return{totalCost:0,entryCost:0,foodCost:0,discountApplied:!1};let s=0,r=0,n=0;p?.forEach((h,z)=>{h.selected&&(n++,h.productSelections?.forEach(P=>{if(P.quantity>0){const O=m.data.find(b=>b.id===h.sessionId)?.productSessionMaps.find(b=>b.product.id===P.productId)?.product,J=O?.productTypes.find(b=>b.id===P.productTypeId);if(O&&J){const b=J.productPrice*P.quantity;O.productType==="Entry"?s+=b:O.productType==="Food"&&(h.optOutOfFood||(r+=b))}}}))});const a=j.length,t=a>0&&n===a,u=n>=2&&n<4,o=n>=4&&n<a;let l="0%",d=1,i=!1;return t&&s>0?(s=s*.7,i=!0,l="30%",d=.7):o&&s>0?(s=s*.8,l="20%",i=!0,d=.8):u&&s>0&&(s=s*.9,l="10%",d=.9,i=!0),{totalCost:s+r,entryCost:s,foodCost:r,discountApplied:i,discountPct:l,discountF:d}},{totalCost:F,entryCost:C,foodCost:V,discountApplied:M,discountPct:le,discountF:R}=ne(),oe=async s=>{let r="";const n={Adult:s.adults,Children:s.children,Elder:s.elder};if(s.sessionSelections.filter(t=>t.selected&&!t.optOutOfFood).forEach((t,u)=>{const o={};t.productSelections?.forEach(l=>{if(l.quantity>0){const d=y.data?.find(x=>x.id===l.productId),i=d?.productTypes.find(x=>x.id===l.productTypeId);if(d?.productType==="Food"&&i?.productSubtype==="DINE-IN"){const x=i.productSize;o[x]||(o[x]=0),o[x]+=l.quantity}}}),Object.entries(o).forEach(([l,d])=>{const i=n[l]||0;i>0&&d!==i&&(r=`For dine-in meals, you must select exactly ${i} ${l.toLowerCase()} meal(s) total per session. Currently selected: ${d} for ${l}.`)})}),r){k.error(r,{duration:6e3});return}const a=s.sessionSelections.filter(t=>t.selected).map(t=>({sessionId:t.sessionId,optOutOfFood:t.optOutOfFood,productSelections:t.productSelections.filter(u=>u.quantity>0)}));if(a.length===0){k.error("Please select at least one session with products.");return}try{await G.mutateAsync({...s,guestEmail:s.guestEmail||void 0,sessionSelections:a})}catch(t){console.error("Registration error:",t)}},Y=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),H=s=>s;return e.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("img",{src:"/mrittika.png",alt:"Mrittika Canada Logo",className:"h-16 w-auto mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-bold text-red-600",children:"Mrittika Canada"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Guest Event Registration"})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Guest Event Registration"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Register for upcoming events as a guest"})]}),e.jsxs("form",{onSubmit:_(oe),className:"p-6 space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name *"}),e.jsx("input",{...c("guestName"),type:"text",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-red-500 focus:border-red-500"}),f.guestName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.guestName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{...c("guestEmail"),type:"email",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-red-500 focus:border-red-500"}),f.guestEmail&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.guestEmail.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),e.jsx("input",{...c("guestPhone"),type:"tel",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-red-500 focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Location"}),e.jsx("input",{...c("guestLocation"),type:"text",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-red-500 focus:border-red-500"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Family Details"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Adults *"}),e.jsx("input",{...c("adults",{valueAsNumber:!0}),type:"number",min:"1",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-red-500 focus:border-red-500"}),f.adults&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.adults.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Children (5-13)"}),e.jsx("input",{...c("children",{valueAsNumber:!0}),type:"number",min:"0",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-red-500 focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Infants (0-5)"}),e.jsx("input",{...c("infants",{valueAsNumber:!0}),type:"number",min:"0",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-red-500 focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Elders (60+)"}),e.jsx("input",{...c("elder",{valueAsNumber:!0}),type:"number",min:"0",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-red-500 focus:border-red-500"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Guests"}),e.jsx("div",{className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-50 text-gray-700 cursor-not-allowed",children:re}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Automatically calculated from above entries"})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Event Selection"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Sponsoring Member *"}),e.jsxs("select",{...c("memberId",{valueAsNumber:!0}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-red-500 focus:border-red-500",children:[e.jsx("option",{value:"",children:"Select a member..."}),Z.data?.map(s=>e.jsxs("option",{value:s.id,children:[s.memberName," (",s.memberEmail,")"]},s.id))]}),f.memberId&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.memberId.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Event *"}),e.jsxs("select",{...c("eventId",{valueAsNumber:!0}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-red-500 focus:border-red-500",children:[e.jsx("option",{value:"",children:"Select an event..."}),X.data?.map(s=>e.jsxs("option",{value:s.id,children:[s.eventName," - ",Y(s.startDate)]},s.id))]}),f.eventId&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.eventId.message})]})]})]}),m.data&&m.data.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Session & Product Selection"}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Guest Pricing:"})," Entry fees apply for all sessions. Select 2 or more sessions to get ",e.jsx("strong",{children:"10% "}),"off entry fees! Food items are charged at regular prices."]}),e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Guest Pricing:"})," Entry fees apply for all sessions. Select 4 or more sessions to get ",e.jsx("strong",{children:"20% "}),"off entry fees! Food items are charged at regular prices."]}),e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Guest Pricing:"})," Entry fees apply for all sessions. Select all sessions to get ",e.jsx("strong",{children:"30% "}),"off entry fees! Food items are charged at regular prices."]})]}),e.jsx("div",{className:"space-y-4",children:j.map((s,r)=>{const n=m.data?.find(a=>a.id===s.sessionId);return n?e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{...c(`sessionSelections.${r}.selected`),type:"checkbox",disabled:n.isFull,className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed",onChange:a=>{n.isFull&&a.target.checked&&(a.target.checked=!1,k.error(`${n.sessionName} is full and cannot be selected.`))}}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:n.sessionName}),n.isFull&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"FULL"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 space-x-4",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(me,{className:"h-4 w-4 mr-1"}),Y(n.sessionDate)]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(xe,{className:"h-4 w-4 mr-1"}),H(n.startTime)," - ",H(n.endTime)]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(pe,{className:"h-4 w-4 mr-1"}),n.isFull?e.jsxs("span",{className:"text-red-600 font-medium",children:["Full (",n.sessionBalanceCapacity,"/",n.sessionBalanceCapacity,")"]}):e.jsxs("span",{className:"text-green-600",children:[n.availableSpots," of ",n.sessionBalanceCapacity," available"]})]})]})]})]}),n.availableSpots<=5&&n.availableSpots>0&&e.jsx("div",{className:"mb-4 ml-7 bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Limited spots remaining!"})," Only ",n.availableSpots," spots left for this session."]})})]})}),p?.[r]?.selected&&e.jsxs("div",{className:"ml-7 space-y-4",children:[e.jsx("div",{className:"bg-amber-50 border-2 border-amber-300 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("input",{...c(`sessionSelections.${r}.optOutOfFood`),type:"checkbox",className:"h-5 w-5 text-red-600 focus:ring-red-500 border-gray-300 rounded mt-0.5",onChange:a=>{a.target.checked&&p?.[r]?.productSelections&&p[r].productSelections.forEach((t,u)=>{y.data?.find(l=>l.id===t.productId)?.productType==="Food"&&D(`sessionSelections.${r}.productSelections.${u}.quantity`,0)})}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-base font-semibold text-amber-900 cursor-pointer",children:"ðŸš« Skip Food for This Session (Entry Only)"}),e.jsx("p",{className:"text-sm text-amber-800 mt-1",children:"Check this box if you only want entry tickets and don't want to order any food for this session. You'll still pay for entry tickets, but no food orders will be placed."}),p?.[r]?.optOutOfFood&&e.jsx("div",{className:"mt-2 p-2 bg-amber-100 rounded text-sm text-amber-900 font-medium",children:"âœ“ Food ordering disabled for this session. You'll get entry tickets without any food orders."})]})]})}),!p?.[r]?.optOutOfFood&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"ðŸ½ï¸ Food Selection Guide"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Your Group:"})," ",N," Adult",N!==1?"s":"",", ",w," Children, ",v," Elder",v!==1?"s":""]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Guest Pricing:"})," Entry fees apply (30% discount if all sessions selected)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Dine-in meals:"})," You must select exactly one meal per person in each category"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Take-away items:"})," You can select any quantity you want"]}),e.jsxs("p",{children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"}),` If you don't want food, use the "Skip Food" option above`]})]})]}),e.jsx("h4",{className:"font-medium text-gray-700",children:"Select Products:"}),n.productSessionMaps.filter(a=>p?.[r]?.optOutOfFood?a.product.productType!=="Food":!0).map(a=>{const t=a.product,u=t.productType==="Food";return e.jsxs("div",{className:`${u?"bg-green-50 border-green-200":"bg-gray-50"} border p-4 rounded-lg`,children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:u?"ðŸ½ï¸":"ðŸŽ«"}),e.jsx("p",{className:"font-semibold text-gray-900",children:t.productName})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.productDesc})]})}),u&&!p?.[r]?.optOutOfFood?e.jsx("div",{className:"space-y-5",children:["Adult","Children","Elder"].map(o=>{const l=o==="Adult"?N:o==="Children"?w:v;if(l===0)return null;const d=t.productTypes.filter(i=>i.productSize===o);return d.length===0?null:e.jsxs("div",{className:"bg-white border-2 border-green-300 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h5",{className:"font-semibold text-green-800 text-lg",children:[o==="Adult"?"ðŸ‘¥":o==="Children"?"ðŸ§’":"ðŸ‘´"," ",o," Meals"]}),e.jsxs("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:[l," ",o.toLowerCase(),l!==1?"s":""]})]}),e.jsx("div",{className:"grid gap-3",children:d.map(i=>{const x=p?.[r]?.productSelections?.findIndex(z=>z.productId===t.id&&z.productTypeId===i.id);if(x===void 0||x===-1)return console.warn(`Guest registration: Product selection not found for product ${t.id}, type ${i.id} in session ${r}`),e.jsx("div",{className:"p-3 rounded-lg border bg-red-50 border-red-200",children:e.jsx("p",{className:"text-red-600 text-sm",children:"Error: Product selection not initialized properly"})},i.id);const h=i.productSubtype==="DINE-IN";return e.jsx("div",{className:`p-3 rounded-lg border ${h?"bg-orange-50 border-orange-200":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm",children:h?"ðŸ½ï¸":"ðŸ“¦"}),e.jsxs("label",{className:"block text-sm font-medium text-gray-900",children:[i.productChoice!=="NONE"?i.productChoice:"Standard Option",i.productPref!=="NONE"&&` - ${i.productPref}`]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["$",i.productPrice]}),e.jsx("span",{className:"text-xs text-gray-500",children:h?"Dine-in meal":"Take-away"})]})]}),e.jsxs("div",{className:"ml-4 w-24",children:[e.jsx("input",{...c(`sessionSelections.${r}.productSelections.${x}.quantity`,{valueAsNumber:!0}),type:"number",min:"0",max:h?l:void 0,placeholder:"0",className:"block w-full border border-gray-300 rounded-md px-2 py-2 text-center text-sm focus:outline-none focus:ring-green-500 focus:border-green-500"}),h&&e.jsxs("p",{className:"text-xs text-orange-600 mt-1 text-center",children:["Max: ",l]})]})]})},i.id)})}),d.some(i=>i.productSubtype==="DINE-IN")&&e.jsxs("div",{className:"mt-3 p-2 bg-orange-100 rounded text-xs text-orange-800",children:[e.jsx("strong",{children:"Dine-in requirement:"})," For dine-in meals, you must select exactly ",l," meal",l!==1?"s":""," total for ",o.toLowerCase(),"s in this category."]})]},o)})}):e.jsx("div",{className:"space-y-3",children:t.productTypes.map(o=>{const l=p?.[r]?.productSelections?.findIndex(d=>d.productId===t.id&&d.productTypeId===o.id);return l===void 0||l===-1?(console.warn(`Guest registration: Product selection not found for product ${t.id}, type ${o.id} in session ${r}`),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-red-600 text-sm",children:"Error: Product selection not initialized properly"})},o.id)):e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["ðŸŽ« ",o.productSize,o.productChoice!=="NONE"&&` - ${o.productChoice}`,e.jsxs("span",{className:"text-gray-600 ml-2",children:["$",o.productPrice.toFixed(2)]})]})}),e.jsx("div",{className:"ml-4",children:t.productType==="Entry"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-16 text-center bg-blue-50 border border-blue-200 rounded-md px-3 py-2 text-sm text-blue-700 font-medium",children:p?.[r]?.productSelections?.[l]?.quantity||0}),e.jsx("span",{className:"text-xs text-blue-600",children:"Auto-set"}),e.jsx("input",{...c(`sessionSelections.${r}.productSelections.${l}.quantity`,{valueAsNumber:!0}),type:"hidden"})]}):e.jsx("input",{...c(`sessionSelections.${r}.productSelections.${l}.quantity`,{valueAsNumber:!0}),type:"number",min:"0",className:"w-20 text-center border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-red-500 focus:border-red-500"})})]}),t.productType==="Entry"&&e.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"âœ¨ Entry tickets are automatically calculated based on your family size when session is selected!"})]},o.id)})})]},t.id)})]})]},s.id):null})})]}),F>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Cost Summary"}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[C>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Entry Fees Subtotal:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["$",M?(C/R).toFixed(2):C.toFixed(2)]})]}),M&&e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-sm text-green-600 flex items-center",children:[e.jsx(he,{className:"h-4 w-4 mr-1"}),"Entry Discount (",le," discount applied):"]}),e.jsxs("span",{className:"text-sm font-medium text-green-600",children:["-$",((C/R).toFixed(2)*(1-R).toFixed(2)).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Entry Fees Total:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["$",C.toFixed(2)]})]})]}),V>0&&e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Food Items:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["$",V.toFixed(2)]})]}),e.jsx("div",{className:"border-t border-gray-300 pt-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Total Cost:"}),e.jsxs("span",{className:"font-bold text-lg text-gray-900",children:["$",F.toFixed(2)]})]})}),e.jsx("div",{className:"border-t border-gray-300 pt-2",children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("span",{className:"mt-2 p-2 bg-blue-50 rounded text-sm text-blue-800",children:["Please transfer ",e.jsxs("strong",{children:[" $",F.toFixed(2)," "]})," using Interac to mrittikacanada@gmail.com. Admin will complete your registration once payment is verified."]})})}),!M&&j.length>0&&e.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded text-sm text-blue-800",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," Select all sessions to get 30% off entry fees!"]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:G.isPending,className:"bg-red-600 hover:bg-red-700 text-white px-8 py-3 rounded-md font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:G.isPending?"Processing...":F>0?`Pay $${F.toFixed(2)} & Complete Registration`:"Complete Registration"})})]})]})]})})};export{Ee as component};
